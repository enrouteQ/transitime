name: 'transitclock'
services:
  core:
    build:
      context: .
      dockerfile: Dockerfile
      target: core
    volumes:
      - ./configs:/usr/local/transitclock/config
      - ./logs:/usr/local/transitclock/logs
    command: core

  api:
    build:
      context: .
      dockerfile: Dockerfile
      target: web
    volumes:
      - ./configs:/usr/local/transitclock/config
      - ./web-logs:/Logs
      - ./tomcat-logs:/usr/local/tomcat/logs
    command: catalina
    ports:
      - "8080:8080"
    links:
      - core

